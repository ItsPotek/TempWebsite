<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Number Scanner</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    #video {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }
    #canvas {
      display: none;
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-4">
  <h2 class="text-center mb-4">Scan a Number</h2>
  
  <div class="mb-3">
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas"></canvas>
  </div>
  
  <div class="d-grid mb-3">
    <button id="scanBtn" class="btn btn-primary btn-lg">Scan</button>
  </div>
  
  <div class="text-center">
    <h4>Detected Number:</h4>
    <p id="result" class="fw-bold fs-3 text-success">None</p>
  </div>
</div>

<!-- JS dependencies -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.4/dist/tesseract.min.js"></script>

<script>
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const resultText = $('#result');

  // Access the camera
  navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
    .then(stream => {
      video.srcObject = stream;
    })
    .catch(err => {
      alert('Error accessing camera: ' + err);
    });

  $('#scanBtn').on('click', () => {
    const ctx = canvas.getContext('2d');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;

    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    Tesseract.recognize(canvas, 'eng', {
      logger: m => console.log(m)
    }).then(({ data: { text } }) => {
      const number = text.match(/\d+/g); // Find numbers only
      resultText.text(number ? number.join(' ') : 'No number detected');
    });
  });
</script>

</body>
</html>
